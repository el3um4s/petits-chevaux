var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function i(t){return null==t?"":t}const l="undefined"!=typeof window;let a=l?()=>window.performance.now():()=>Date.now(),f=l?t=>requestAnimationFrame(t):t;const d=new Set;function h(t){d.forEach((e=>{e.c(t)||(d.delete(e),e.f())})),0!==d.size&&f(h)}function p(t){let e;return 0===d.size&&f(h),{promise:new Promise((n=>{d.add(e={c:t,f:n})})),abort(){d.delete(e)}}}function g(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function v(){return y(" ")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}const k=new Set;let C,E=0;function S(t,e,n,o,s,r,c,u=0){const i=16.666/o;let l="{\n";for(let t=0;t<=1;t+=i){const o=e+(n-e)*r(t);l+=100*t+`%{${c(o,1-o)}}\n`}const a=l+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${u}`,d=t.ownerDocument;k.add(d);const h=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(b("style")).sheet),p=d.__svelte_rules||(d.__svelte_rules={});p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${a}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${o}ms linear ${s}ms 1 both`,E+=1,f}function M(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-o.length;s&&(t.style.animation=o.join(", "),E-=s,E||f((()=>{E||(k.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),k.clear())})))}function T(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),s="none"===o.transform?"":o.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,s)}}function A(t){C=t}function O(t){(function(){if(!C)throw new Error("Function called outside component initialization");return C})().$$.on_mount.push(t)}const R=[],L=[],P=[],j=[],B=Promise.resolve();let z=!1;function F(t){P.push(t)}let N=!1;const q=new Set;function D(){if(!N){N=!0;do{for(let t=0;t<R.length;t+=1){const e=R[t];A(e),H(e.$$)}for(A(null),R.length=0;L.length;)L.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];q.has(e)||(q.add(e),e())}P.length=0}while(R.length);for(;j.length;)j.pop()();z=!1,N=!1,q.clear()}}function H(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}let I;function W(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const Y=new Set;let G;function J(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function K(t,e,n,o){if(t&&t.o){if(Y.has(t))return;Y.add(t),G.c.push((()=>{Y.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const Q={duration:0};function U(n,o,c,u){let i=o(n,c),l=u?0:1,f=null,d=null,h=null;function g(){h&&M(n,h)}function m(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(o){const{delay:r=0,duration:c=300,easing:u=e,tick:$=t,css:b}=i||Q,y={start:a()+r,b:o};o||(y.group=G,G.r+=1),f||d?d=y:(b&&(g(),h=S(n,l,o,c,r,u,b)),o&&$(0,1),f=m(y,c),F((()=>W(n,o,"start"))),p((t=>{if(d&&t>d.start&&(f=m(d,c),d=null,W(n,f.b,"start"),b&&(g(),h=S(n,l,f.b,f.duration,0,u,i.css))),f)if(t>=f.end)$(l=f.b,1-l),W(n,f.b,"end"),d||(f.b?g():--f.group.r||s(f.group.c)),f=null;else if(t>=f.start){const e=t-f.start;l=f.a+f.d*u(e/f.duration),$(l,1-l)}return!(!f&&!d)})))}return{run(t){r(i)?(I||(I=Promise.resolve(),I.then((()=>{I=null}))),I).then((()=>{i=i(),$(t)})):$(t)},end(){g(),f=d=null}}}function V(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function X(t){t&&t.c()}function Z(t,e,o,c){const{fragment:u,on_mount:i,on_destroy:l,after_update:a}=t.$$;u&&u.m(e,o),c||F((()=>{const e=i.map(n).filter(r);l?l.push(...e):s(e),t.$$.on_mount=[]})),a.forEach(F)}function tt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(t,e){-1===t.$$.dirty[0]&&(R.push(t),z||(z=!0,B.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function nt(e,n,r,c,u,i,l=[-1]){const a=C;A(e);const f=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:u,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:n.context||[]),callbacks:o(),dirty:l,skip_bound:!1};let d=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&u(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),d&&et(e,t)),n})):[],f.update(),d=!0,s(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach($)}else f.fragment&&f.fragment.c();n.intro&&J(e.$$.fragment),Z(e,n.target,n.anchor,n.customElement),D()}A(a)}class ot{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function st(t){const e=t-1;return e*e*e+1}function rt(t,{delay:n=0,duration:o=400,easing:s=e}={}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:s,css:t=>"opacity: "+t*r}}const ct=t=>({on:()=>ct(t),otherwise:()=>t}),ut=t=>({on:(e,n)=>e(t)?ct(n(t)):ut(t),otherwise:e=>e(t)}),it=[];function lt(e,n=t){let o;const s=[];function r(t){if(c(e,t)&&(e=t,o)){const t=!it.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),it.push(n,e)}if(t){for(let t=0;t<it.length;t+=2)it[t][0](it[t+1]);it.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,u=t){const i=[c,u];return s.push(i),1===s.length&&(o=n(r)||t),c(e),()=>{const t=s.indexOf(i);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}const at=lt(!1),ft={subscribe:at.subscribe,setTrue:()=>{at.update((t=>!0))}},dt=lt(!1),ht={subscribe:dt.subscribe,setTrue:()=>{dt.update((t=>!0))},setFalse:()=>{dt.update((t=>!1))}},pt=lt([]),gt={subscribe:pt.subscribe,addResult:t=>{const e=Object.assign(Object.assign({},t),{id:Math.random().toString()});pt.update((t=>[e,...t]))}};function mt(t,e,n="*"){t.contentWindow.postMessage(e,n)}function $t(t){if("https://el3um4s.github.io/petits-chevaux"!==t.origin)console.log("Error, wrong origin");else{const e=t.data;console.log(e),ut(e.type).on((t=>"status"===t),(()=>{return t=e.content,void ut(t).on((t=>"loader layout complete"===t.toLowerCase()),(()=>ft.setTrue())).on((t=>"playing"===t.toLowerCase()),(()=>ht.setFalse())).on((t=>"no play"===t.toLowerCase()),(()=>ht.setTrue())).otherwise((t=>()=>0));var t})).on((t=>"win"===t),(()=>function(t){const e=t[0],n=parseInt(t.slice(t.indexOf(":")+1,t.length).trim());gt.addResult({num:e,distance:n})}(e.content))).otherwise((t=>()=>0))}}function bt(e){let n,o;return{c(){n=b("iframe"),w(n,"title","C3"),n.src!==(o="./c3/index.html")&&w(n,"src","./c3/index.html"),w(n,"scrolling","no"),w(n,"noresize","noresize"),w(n,"class","svelte-lvkwyy")},m(t,o){m(t,n,o),e[1](n)},p:t,i:t,o:t,d(t){t&&$(n),e[1](null)}}}function yt(t,e,n){let{construct3:o}=e;return t.$$set=t=>{"construct3"in t&&n(0,o=t.construct3)},[o,function(t){L[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class vt extends ot{constructor(t){super(),nt(this,t,yt,bt,c,{construct3:0})}}function _t(t,e,n={}){const o=getComputedStyle(t),s="none"===o.transform?"":o.transform,c=e.from.width/t.clientWidth,u=e.from.height/t.clientHeight,i=(e.from.left-e.to.left)/c,l=(e.from.top-e.to.top)/u,a=Math.sqrt(i*i+l*l),{delay:f=0,duration:d=(t=>120*Math.sqrt(t)),easing:h=st}=n;return{delay:f,duration:r(d)?d(a):d,easing:h,css:(t,e)=>`transform: ${s} translate(${e*i}px, ${e*l}px);`}}function wt(t){return ut(t).on((t=>["2","4","7","9"].includes(t)),(()=>"red")).on((t=>["1","3","6","8"].includes(t)),(()=>"blue")).on((t=>"5"===t),(()=>"green")).otherwise((t=>()=>"normal"))}function xt(t,e,n){const o=t.slice();return o[1]=e[n],o}function kt(n,o){let s,r,c,u,l,f,d,h,_,k,C=o[1].num+"",E=o[1].distance+"",A=t;return{key:n,first:null,c(){s=b("tr"),r=b("td"),c=b("strong"),u=y(C),l=v(),f=b("td"),d=y(E),h=v(),w(r,"class","svelte-n06uue"),w(f,"class","svelte-n06uue"),w(s,"class",_=i(wt(o[1].num))+" svelte-n06uue"),this.first=s},m(t,e){m(t,s,e),g(s,r),g(r,c),g(c,u),g(s,l),g(s,f),g(f,d),g(s,h)},p(t,e){o=t,1&e&&C!==(C=o[1].num+"")&&x(u,C),1&e&&E!==(E=o[1].distance+"")&&x(d,E),1&e&&_!==(_=i(wt(o[1].num))+" svelte-n06uue")&&w(s,"class",_)},r(){k=s.getBoundingClientRect()},f(){T(s),A()},a(){A(),A=function(n,o,s,r){if(!o)return t;const c=n.getBoundingClientRect();if(o.left===c.left&&o.right===c.right&&o.top===c.top&&o.bottom===c.bottom)return t;const{delay:u=0,duration:i=300,easing:l=e,start:f=a()+u,end:d=f+i,tick:h=t,css:g}=s(n,{from:o,to:c},r);let m,$=!0,b=!1;function y(){g&&M(n,m),$=!1}return p((t=>{if(!b&&t>=f&&(b=!0),b&&t>=d&&(h(1,0),y()),!$)return!1;if(b){const e=0+1*l((t-f)/i);h(e,1-e)}return!0})),g&&(m=S(n,0,1,i,u,l,g)),u||(b=!0),h(0,1),y}(s,k,_t,{})},d(t){t&&$(s)}}}function Ct(e){let n,o,s,r,c=[],u=new Map,i=e[0];const l=t=>t[1].id;for(let t=0;t<i.length;t+=1){let n=xt(e,i,t),o=l(n);u.set(o,c[t]=kt(o,n))}return{c(){n=b("table"),o=b("thead"),o.innerHTML='<tr><th class="svelte-n06uue">Boil</th> \n      <th class="svelte-n06uue">Distance</th></tr>',s=v(),r=b("tbody");for(let t=0;t<c.length;t+=1)c[t].c();w(o,"class","svelte-n06uue"),w(r,"class","scrollable svelte-n06uue"),w(n,"class","svelte-n06uue")},m(t,e){m(t,n,e),g(n,o),g(n,s),g(n,r);for(let t=0;t<c.length;t+=1)c[t].m(r,null)},p(t,[e]){if(1&e){i=t[0];for(let t=0;t<c.length;t+=1)c[t].r();c=function(t,e,n,o,s,r,c,u,i,l,a,f){let d=t.length,h=r.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const m=[],$=new Map,b=new Map;for(p=h;p--;){const t=f(s,r,p),u=n(t);let i=c.get(u);i?o&&i.p(t,e):(i=l(u,t),i.c()),$.set(u,m[p]=i),u in g&&b.set(u,Math.abs(p-g[u]))}const y=new Set,v=new Set;function _(t){J(t,1),t.m(u,a),c.set(t.key,t),a=t.first,h--}for(;d&&h;){const e=m[h-1],n=t[d-1],o=e.key,s=n.key;e===n?(a=e.first,d--,h--):$.has(s)?!c.has(o)||y.has(o)?_(e):v.has(s)?d--:b.get(o)>b.get(s)?(v.add(o),_(e)):(y.add(s),d--):(i(n,c),d--)}for(;d--;){const e=t[d];$.has(e.key)||i(e,c)}for(;h;)_(m[h-1]);return m}(c,e,l,1,t,i,u,r,V,kt,null,xt);for(let t=0;t<c.length;t+=1)c[t].a()}},i:t,o:t,d(t){t&&$(n);for(let t=0;t<c.length;t+=1)c[t].d()}}}function Et(t,e,n){let o;return u(t,gt,(t=>n(0,o=t))),[o]}class St extends ot{constructor(t){super(),nt(this,t,Et,Ct,c,{})}}function Mt(t){let e,n,o,r,c,u,i,l,a,f,d,h,p,x,k,C,E,S,M,T,A=!t[1]&&Tt(t),O=t[2]&&At();return C=new St({}),{c(){e=b("div"),n=b("div"),o=b("label"),r=b("input"),c=y("\n          AutoPlay"),u=v(),A&&A.c(),i=v(),l=b("div"),a=b("label"),f=b("input"),d=y("\n          Show Stats"),h=v(),O&&O.c(),x=v(),k=b("div"),X(C.$$.fragment),w(r,"type","checkbox"),w(n,"class","autoplay"),w(f,"type","checkbox"),w(l,"class","statistics"),w(e,"class","settings svelte-2okntv"),w(k,"class","results svelte-2okntv")},m(s,p){m(s,e,p),g(e,n),g(n,o),g(o,r),r.checked=t[1],g(o,c),g(n,u),A&&A.m(n,null),g(e,i),g(e,l),g(l,a),g(a,f),f.checked=t[2],g(a,d),g(l,h),O&&O.m(l,null),m(s,x,p),m(s,k,p),Z(C,k,null),S=!0,M||(T=[_(r,"change",t[7]),_(r,"change",t[5]),_(f,"change",t[9])],M=!0)},p(t,e){2&e&&(r.checked=t[1]),t[1]?A&&(A.d(1),A=null):A?A.p(t,e):(A=Tt(t),A.c(),A.m(n,null)),4&e&&(f.checked=t[2]),t[2]?O||(O=At(),O.c(),O.m(l,null)):O&&(O.d(1),O=null)},i(t){S||(F((()=>{p||(p=U(e,rt,{},!0)),p.run(1)})),J(C.$$.fragment,t),F((()=>{E||(E=U(k,rt,{},!0)),E.run(1)})),S=!0)},o(t){p||(p=U(e,rt,{},!1)),p.run(0),K(C.$$.fragment,t),E||(E=U(k,rt,{},!1)),E.run(0),S=!1},d(t){t&&$(e),A&&A.d(),O&&O.d(),t&&p&&p.end(),t&&$(x),t&&$(k),tt(C),t&&E&&E.end(),M=!1,s(T)}}}function Tt(t){let e,n,o,s,r;return{c(){e=b("button"),n=y("Spin"),e.disabled=o=!t[4]},m(o,c){m(o,e,c),g(e,n),s||(r=_(e,"click",t[8]),s=!0)},p(t,n){16&n&&o!==(o=!t[4])&&(e.disabled=o)},d(t){t&&$(e),s=!1,r()}}}function At(t){let e;return{c(){e=b("p"),e.textContent="..."},m(t,n){m(t,e,n)},d(t){t&&$(e)}}}function Ot(t){let e,n,o,r,c,u,i,l,a;function f(e){t[6](e)}let d={};void 0!==t[0]&&(d.construct3=t[0]),c=new vt({props:d}),L.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(c,"construct3",f)));let h=t[3]&&Mt(t);return{c(){e=b("main"),n=b("div"),n.innerHTML='<h2 class="svelte-2okntv">Petits Chevaux</h2> \n    <p>A gambling game based on the ancient Petits Chevaux (French game). In\n      other words, a miniature roulette made with Construct 3 and Svelte</p>',o=v(),r=b("div"),X(c.$$.fragment),l=v(),h&&h.c(),w(n,"class","title svelte-2okntv"),w(r,"class","roulette svelte-2okntv"),w(e,"class","grid-container svelte-2okntv")},m(t,s){m(t,e,s),g(e,n),g(e,o),g(e,r),Z(c,r,null),g(e,l),h&&h.m(e,null),a=!0},p(t,[n]){const o={};var r;!u&&1&n&&(u=!0,o.construct3=t[0],r=()=>u=!1,j.push(r)),c.$set(o),t[3]?h?(h.p(t,n),8&n&&J(h,1)):(h=Mt(t),h.c(),J(h,1),h.m(e,null)):h&&(G={r:0,c:[],p:G},K(h,1,1,(()=>{h=null})),G.r||s(G.c),G=G.p)},i(t){a||(J(c.$$.fragment,t),F((()=>{i||(i=U(r,rt,{},!0)),i.run(1)})),J(h),a=!0)},o(t){K(c.$$.fragment,t),i||(i=U(r,rt,{},!1)),i.run(0),K(h),a=!1},d(t){t&&$(e),tt(c),t&&i&&i.end(),h&&h.d()}}}function Rt(t,e,n){let o,s,r;u(t,ft,(t=>n(3,o=t))),u(t,ht,(t=>n(4,s=t)));let c=!0,i=!0;O((()=>{globalThis.addEventListener?globalThis.addEventListener("message",$t,!1):globalThis.attachEvent("onmessage",$t)}));return[r,c,i,o,s,function(){mt(r,{type:"set",content:c?"AutoPlay=YES":"AutoPlay=NO"})},function(t){r=t,n(0,r)},function(){c=this.checked,n(1,c)},()=>mt(r,{type:"status",content:"SPIN"},"*"),function(){i=this.checked,n(2,i)}]}return new class extends ot{constructor(t){super(),nt(this,t,Rt,Ot,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
